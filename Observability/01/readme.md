### Scenario 1: Implement Logging and Monitoring with Sidecar Containers

#### Setup Script

```sh
#!/bin/bash

# Create a namespace for the exercise
kubectl create namespace ckad-scenario-7

# Deploy a sample application with a logging sidecar container
kubectl apply -f - <<EOF
apiVersion: v1
kind: Pod
metadata:
  name: logging-pod
  namespace: ckad-scenario-7
spec:
  containers:
  - name: main-app
    image: nginx
    ports:
    - containerPort: 80
  - name: logger
    image: busybox
    command: ['sh', '-c', 'tail -f /var/log/nginx/access.log']
    volumeMounts:
    - name: log-volume
      mountPath: /var/log/nginx
  volumes:
  - name: log-volume
    emptyDir: {}
EOF

echo "Setup complete. Your environment is ready."
```

#### Intermediate Exercise

1. Verify that the Pod named `logging-pod` is running in the `ckad-scenario-7` namespace.
2. Inspect the logs of the `logger` container to ensure it is capturing the logs from the `main-app` container.
3. Create a new Pod that reads the logs generated by the `main-app` container through the shared volume.

##### Solution

1. Verify that the Pod named `logging-pod` is running:
   ```sh
   kubectl get pod logging-pod -n ckad-scenario-7
   ```

2. Inspect the logs of the `logger` container:
   ```sh
   kubectl logs logging-pod -c logger -n ckad-scenario-7
   ```

3. Create a new Pod that reads the logs from the shared volume:
   ```yaml
   apiVersion: v1
   kind: Pod
   metadata:
     name: log-reader
     namespace: ckad-scenario-7
   spec:
     containers:
     - name: log-reader
       image: busybox
       command: ['sh', '-c', 'cat /var/log/nginx/access.log; sleep 3600']
       volumeMounts:
       - name: log-volume
         mountPath: /var/log/nginx
     volumes:
     - name: log-volume
       emptyDir: {}
   ```
   ```sh
   kubectl apply -f log-reader.yaml
   kubectl logs log-reader -n ckad-scenario-7
   ```

#### Cleanup Script

```sh
#!/bin/bash

# Delete the Pods
kubectl delete pod logging-pod -n ckad-scenario-7
kubectl delete pod log-reader -n ckad-scenario-7

# Delete the namespace
kubectl delete namespace ckad-scenario-7

echo "Cleanup complete. Your environment has been reset."
```

#### References and Links

- [Kubernetes Documentation](https://kubernetes.io/docs/home/)
- [Logging Architecture](https://kubernetes.io/docs/concepts/cluster-administration/logging/)
- [Sidecar Pattern](https://kubernetes.io/docs/concepts/workloads/pods/#using-pods)

---
